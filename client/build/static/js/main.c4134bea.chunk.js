(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{31:function(e,t,a){e.exports=a(63)},55:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),l=a.n(c),o=a(8),i=a.n(o),u=(a(54),a(55),a(10)),s=a(9),m=a(5),d=a(4),g=a(28),E=a.n(g),f={get:function(){return localStorage.getItem("token")},set:function(e){return localStorage.setItem("token",e)},clear:function(){return localStorage.removeItem("token")},payload:function(){try{return E()(f.get())}catch(e){return console.log(e),null}}},b=function(){return!!f.get()&&f.payload().exp>Date.now()/1e3},p=function(){if(b()){var e=f.payload().id;return i.a.get("/api/users/".concat(e)).then((function(e){return e.data.user}))}return Promise.resolve(null)},h={isLoggedIn:!1,user:null,isPending:!1,error:""},v=Object(d.a)(Object(d.a)({},h),{},{login:function(){},logout:function(){},signup:function(){}}),O=Object(n.createContext)(v),y=function(e,t){switch(t.type){case"ERROR":return Object(d.a)(Object(d.a)({},e),{},{error:t.error,isPending:!1});case"PENDING":return Object(d.a)(Object(d.a)({},e),{},{isPending:!0});case"LOGIN_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!0,user:t.user,error:"",isPending:!1});case"LOGOUT":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!1,isPending:!1,user:null});default:throw new Error("Invalid action: ".concat(t.type))}},N=function(e){var t=Object(n.useReducer)(y,h),a=Object(m.a)(t,2),c=a[0],l=a[1],o=function(){f.clear(),l({type:"LOGOUT"})};Object(n.useEffect)((function(){b()&&(l({type:"PENDING"}),p().then((function(e){return l({type:"LOGIN_SUCCESS",user:e})})).catch((function(e){console.log(e),o()})))}),[]);var u=function(e,t){return l({type:"PENDING"}),function(e,t){return i.a.post("/auth/login",{email:e,password:t}).then((function(e){return f.set(e.data.token),f.payload()}))}(e,t).then((function(){return p()})).then((function(e){return l({type:"LOGIN_SUCCESS",user:e})})).catch((function(e){console.log(e),l({type:"ERROR",error:"Invalid email or password. Try again."})}))},s=Object(d.a)(Object(d.a)({},c),{},{login:u,logout:o,signup:function(e,t){l({type:"PENDING"}),function(e,t){return i.a.post("/api/users",{email:e,password:t})}(e,t).then((function(){return u(e,t)})).catch((function(e){console.log(e),l({type:"ERROR",error:"Invalid email and password or account already exists."})}))}});return r.a.createElement(O.Provider,Object.assign({value:s},e))},j=function(){return Object(n.useContext)(O)},w=function(e){var t=e.props;return r.a.createElement("div",{className:"col-2"},r.a.createElement("div",{className:"card",style:{margin:"2vw"}},r.a.createElement("img",{src:"...",className:"card-img-top",alt:"..."}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.title),r.a.createElement("p",{className:"card-text"},"Some quick example text to build on the card title and make up the bulk of the card's content."))))},x=function(){var e=j(),t=(e.user,e.logout),a=Object(n.useState)(""),c=Object(m.a)(a,2),l=c[0],o=c[1],u=Object(n.useState)(""),s=Object(m.a)(u,2),d=s[0],g=s[1],E=Object(n.useState)([]),f=Object(m.a)(E,2),b=f[0],p=f[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",null,r.a.createElement("div",{className:"nav-wrapper"},r.a.createElement("ul",{className:"left hide-on-med-and-down"},r.a.createElement("li",null,r.a.createElement("a",{href:"/members"},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"/content"},"Contents")),r.a.createElement("li",{className:"active",onClick:t},r.a.createElement("a",{href:"#"},"Logout"))))),r.a.createElement("input",{placeholder:"Where are you (city name?)",onChange:function(e){return o(e.target.value)}}),r.a.createElement("input",{placeholder:"What date do you want? (year-month-day)",onChange:function(e){return g(e.target.value)}}),r.a.createElement("button",{onClick:function(){var e;(e={city:l,date:d},i.a.post("/api/news",e)).then((function(e){var t=e.data;return p(t.articles)}))},className:"btn btn-warning btn-lg"},"Submit"),r.a.createElement("div",{className:"row"},b.map((function(e){return r.a.createElement(w,{props:e})}))),r.a.createElement("footer",{id:"footer"},"\xa9 2020 BillBoh"))},S=function(e){var t=e.text,a=void 0===t?"Loading...":t;return r.a.createElement("div",{className:"vh-100 text-center d-flex align-items-center"},r.a.createElement("div",{className:"w-100"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},a)),r.a.createElement("h1",{className:"mt-3 h4 font-weight-normal"},a)))},I=a(12),C=function(e){var t=e.type,a=void 0===t?"danger":t,n=e.children,c=Object(I.a)(e,["type","children"]);return r.a.createElement("div",Object.assign({className:"alert alert-".concat(a)},c),n)},P=function(e){var t=e.error;return r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("div",{className:"mt-3 w-100",style:{position:"absolute",top:0}},r.a.createElement(C,null,t)))},k=function(e){var t=e.labelText,a=e.id,n=Object(I.a)(e,["labelText","id"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:a,className:"sr-only"},t),r.a.createElement("input",Object.assign({id:a,placeholder:t,className:"form-control"},n)))},L=function(e){return r.a.createElement(k,Object.assign({labelText:"Email address",id:"email",name:"email",type:"email",className:"form-control"},e))},R=function(e){return r.a.createElement(k,Object.assign({labelText:"Password",id:"password",name:"password",type:"password",className:"form-control"},e))},T=function(){var e=j(),t=e.login,a=e.isPending,c=e.isLoggedIn,l=e.error,o=Object(n.useState)(""),i=Object(m.a)(o,2),d=i[0],g=i[1],E=Object(n.useState)(""),f=Object(m.a)(E,2),b=f[0],p=f[1];return c?r.a.createElement(s.a,{to:"/"}):a?r.a.createElement(S,{text:"Verifying account..."}):r.a.createElement("div",{className:"container vh-100 text-center d-flex align-items-center flex-column"},r.a.createElement("form",{className:"form-login m-auto",onSubmit:function(e){e.preventDefault(),t(d,b)}},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in"),r.a.createElement(L,{required:!0,value:d,onChange:function(e){return g(e.target.value)}}),r.a.createElement(R,{required:!0,value:b,onChange:function(e){return p(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"my-3 btn btn-lg btn-primary btn-block"},"Log In"),r.a.createElement("div",null,r.a.createElement(u.b,{to:"/signup"},"Create an account")),l&&r.a.createElement(P,{error:l})))},G=function(){var e=j(),t=e.isLoggedIn,a=e.isPending,c=e.signup,l=e.error,o=Object(n.useState)(""),i=Object(m.a)(o,2),d=i[0],g=i[1],E=Object(n.useState)(""),f=Object(m.a)(E,2),b=f[0],p=f[1];return t?r.a.createElement(s.a,{to:"/"}):a?r.a.createElement(S,{text:"Creating account..."}):r.a.createElement("div",{className:"container vh-100 text-center d-flex align-items-center"},r.a.createElement("form",{className:"form-login m-auto",onSubmit:function(e){e.preventDefault(),c(d,b)}},r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Create a new account"),r.a.createElement(L,{required:!0,value:d,onChange:function(e){return g(e.target.value)}}),r.a.createElement(R,{required:!0,value:b,onChange:function(e){return p(e.target.value)}}),r.a.createElement("button",{type:"submit",className:"my-3 btn btn-lg btn-primary btn-block"},"Sign up"),r.a.createElement("div",null,"Already have an account? ",r.a.createElement(u.b,{to:"/login"},"Login")),l&&r.a.createElement(P,{error:l})))},D=function(e){var t=e.onFailureRedirectToPath,a=void 0===t?"/login":t,n=Object(I.a)(e,["onFailureRedirectToPath"]);return j().isLoggedIn?r.a.createElement(s.b,n):r.a.createElement(s.a,{to:a})};var q=function(){return r.a.createElement(N,null,r.a.createElement(u.a,null,r.a.createElement(s.d,null,r.a.createElement(D,{exact:!0,path:"/",onFailureRedirectToPath:"/login"},r.a.createElement(x,null)),r.a.createElement(s.b,{exact:!0,path:"/login"},r.a.createElement(T,null)),r.a.createElement(s.b,{exact:!0,path:"/signup"},r.a.createElement(G,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.interceptors.request.use((function(e){var t=f.get();return t&&(e.headers.Authorization="Bearer ".concat(t)),e})),l.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.c4134bea.chunk.js.map